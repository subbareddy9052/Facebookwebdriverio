"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.commands = void 0;

require("source-map-support/register");

var _logger = _interopRequireDefault(require("../logger"));

var _appiumSupport = require("appium-support");

let extensions = {},
    commands = {};
exports.commands = commands;

commands.mobileGetDeviceInfo = async function mobileGetDeviceInfo() {
  let locale;

  try {
    locale = await this.adb.getDeviceLocale();
  } catch (e) {
    _logger.default.warn(`Failed to get device locale: ${e.message}`);
  }

  let timezone;

  try {
    timezone = await this.adb.getTimezone();
  } catch (e) {
    _logger.default.warn(`Failed to get device timezone: ${e.message}`);
  }

  const info = {};

  if (_appiumSupport.util.hasValue(locale)) {
    info.locale = locale;
  }

  if (_appiumSupport.util.hasValue(timezone)) {
    info.timeZone = timezone;
  }

  return info;
};

Object.assign(extensions, commands);
var _default = extensions;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9jb21tYW5kcy9kZXZpY2VJbmZvLmpzIl0sIm5hbWVzIjpbImV4dGVuc2lvbnMiLCJjb21tYW5kcyIsIm1vYmlsZUdldERldmljZUluZm8iLCJsb2NhbGUiLCJhZGIiLCJnZXREZXZpY2VMb2NhbGUiLCJlIiwibG9nZ2VyIiwid2FybiIsIm1lc3NhZ2UiLCJ0aW1lem9uZSIsImdldFRpbWV6b25lIiwiaW5mbyIsInV0aWwiLCJoYXNWYWx1ZSIsInRpbWVab25lIiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUVBLElBQUlBLFVBQVUsR0FBRyxFQUFqQjtBQUFBLElBQXFCQyxRQUFRLEdBQUcsRUFBaEM7OztBQWVBQSxRQUFRLENBQUNDLG1CQUFULEdBQStCLGVBQWVBLG1CQUFmLEdBQXNDO0FBQ25FLE1BQUlDLE1BQUo7O0FBQ0EsTUFBSTtBQUNGQSxJQUFBQSxNQUFNLEdBQUcsTUFBTSxLQUFLQyxHQUFMLENBQVNDLGVBQVQsRUFBZjtBQUNELEdBRkQsQ0FFRSxPQUFPQyxDQUFQLEVBQVU7QUFDVkMsb0JBQU9DLElBQVAsQ0FBYSxnQ0FBK0JGLENBQUMsQ0FBQ0csT0FBUSxFQUF0RDtBQUNEOztBQUVELE1BQUlDLFFBQUo7O0FBQ0EsTUFBSTtBQUNGQSxJQUFBQSxRQUFRLEdBQUcsTUFBTSxLQUFLTixHQUFMLENBQVNPLFdBQVQsRUFBakI7QUFDRCxHQUZELENBRUUsT0FBT0wsQ0FBUCxFQUFVO0FBQ1ZDLG9CQUFPQyxJQUFQLENBQWEsa0NBQWlDRixDQUFDLENBQUNHLE9BQVEsRUFBeEQ7QUFDRDs7QUFFRCxRQUFNRyxJQUFJLEdBQUcsRUFBYjs7QUFDQSxNQUFJQyxvQkFBS0MsUUFBTCxDQUFjWCxNQUFkLENBQUosRUFBMkI7QUFDekJTLElBQUFBLElBQUksQ0FBQ1QsTUFBTCxHQUFjQSxNQUFkO0FBQ0Q7O0FBQ0QsTUFBSVUsb0JBQUtDLFFBQUwsQ0FBY0osUUFBZCxDQUFKLEVBQTZCO0FBQzNCRSxJQUFBQSxJQUFJLENBQUNHLFFBQUwsR0FBZ0JMLFFBQWhCO0FBQ0Q7O0FBQ0QsU0FBT0UsSUFBUDtBQUNELENBdkJEOztBQXlCQUksTUFBTSxDQUFDQyxNQUFQLENBQWNqQixVQUFkLEVBQTBCQyxRQUExQjtlQUVlRCxVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvZ2dlciBmcm9tICcuLi9sb2dnZXInO1xuaW1wb3J0IHsgdXRpbCB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcblxubGV0IGV4dGVuc2lvbnMgPSB7fSwgY29tbWFuZHMgPSB7fTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBEZXZpY2VJbmZvXG4gKlxuICogQHByb3BlcnR5IHs/c3RyaW5nfSBjdXJyZW50TG9jYWxlIC0gQ3VycmVudCBkZXZpY2UgbG9jYWxlLiBlLmcuICdqYV9FTicgYW5kICd6aC1IYW50X1VTJ1xuICogQHByb3BlcnR5IHs/c3RyaW5nfSB0aW1lWm9uZSAtIFRaIGRhdGFiYXNlIFRpbWUgWm9uZXMgZm9ybWF0IGxpa2UgJ1VTL1BhY2lmaWMnXG4gICovXG5cbi8qKlxuICogUmV0dXJucyBkZXZpY2UgaW5mby5cbiAqXG4gKiBAcmV0dXJucyB7RGV2aWNlSW5mb30gVGhlIGN1cnJlbnQgZGV2aWNlIGluZm9cbiAqIEB0aHJvd3Mge0Vycm9yfSBpZiBhbiBlcnJvciByYWlzZWQgYnkgY29tbWFuZFxuICovXG5jb21tYW5kcy5tb2JpbGVHZXREZXZpY2VJbmZvID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlR2V0RGV2aWNlSW5mbyAoKSB7XG4gIGxldCBsb2NhbGU7XG4gIHRyeSB7XG4gICAgbG9jYWxlID0gYXdhaXQgdGhpcy5hZGIuZ2V0RGV2aWNlTG9jYWxlKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGdldCBkZXZpY2UgbG9jYWxlOiAke2UubWVzc2FnZX1gKTtcbiAgfVxuXG4gIGxldCB0aW1lem9uZTtcbiAgdHJ5IHtcbiAgICB0aW1lem9uZSA9IGF3YWl0IHRoaXMuYWRiLmdldFRpbWV6b25lKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBsb2dnZXIud2FybihgRmFpbGVkIHRvIGdldCBkZXZpY2UgdGltZXpvbmU6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG5cbiAgY29uc3QgaW5mbyA9IHt9O1xuICBpZiAodXRpbC5oYXNWYWx1ZShsb2NhbGUpKSB7XG4gICAgaW5mby5sb2NhbGUgPSBsb2NhbGU7XG4gIH1cbiAgaWYgKHV0aWwuaGFzVmFsdWUodGltZXpvbmUpKSB7XG4gICAgaW5mby50aW1lWm9uZSA9IHRpbWV6b25lO1xuICB9XG4gIHJldHVybiBpbmZvO1xufTtcblxuT2JqZWN0LmFzc2lnbihleHRlbnNpb25zLCBjb21tYW5kcyk7XG5leHBvcnQgeyBjb21tYW5kcyB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJmaWxlIjoibGliL2NvbW1hbmRzL2RldmljZUluZm8uanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4ifQ==
